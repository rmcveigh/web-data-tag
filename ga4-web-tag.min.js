String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,a){var t=a>0?0|a:0;return this.substring(t,t+e.length)===e}});var dataLayerVariableName="uc_data_layer_variable",eventDataLayerData={},dataLayerEventName="uc_data_tag_event";function dataTagParseResponse(e){try{return JSON.parse(e)}catch(a){return{body:e}}}function replaceVariable(e,a){return e.replace(/\$\{([^\}]+)\}/g,(function(e,t){return a[t]||e}))}function sendPixel(e){var a=new Image(1,1);e.startsWith(("/"===gtmServerDomain.charAt(gtmServerDomain.length-1)?gtmServerDomain.slice(0,-1):gtmServerDomain)+"/_set_cookie")&&(setCookieRunningCount++,a.onload=a.onerror=function(){a.onload=a.onerror=null,setCookieRunningCount--,(!xhr||4===xhr.readyState)&&dataLayerEventName&&dataLayerVariableName&&waitForCookies&&0===setCookieRunningCount&&pushToDataLayer()}),a.src=e}function sendBeacon(e){var a;try{a=navigator.sendBeacon&&navigator.sendBeacon(e)}catch(e){}a||sendPixel(e)}function fallbackIterator(e){var a=0;return function(){return a<e.length?{done:!1,value:e[a++]}:{done:!0}}}function pushToDataLayer(){window[dataLayerVariableName]=window[dataLayerVariableName]||[],eventDataLayerData.event=dataLayerEventName,window[dataLayerVariableName].push(eventDataLayerData)}function processResponseDataEvent(e){if(e){var a,t=e.send_pixel||[];if(Array.isArray(t))for(a=0;a<t.length;a++)sendPixel(t[a]);var n=e.send_beacon||[];if(Array.isArray(n))for(a=0;a<n.length;a++)sendBeacon(n[a]);if("object"==typeof e.response){var r=e.response.status_code||0,o=dataTagParseResponse(e.response.body||{});for(var s in o)o.hasOwnProperty(s)&&(eventDataLayerData[s]=o[s]);eventDataLayerData.status=r}}}function sendPostRequest(e,a,t,n,r,o,s,i,d){fetch(e+a,{method:"POST",headers:{"Content-Type":"text/plain"},credentials:"include",keepalive:!0,body:t}).then((function(e){e.text().then((function(a){a&&(a=replaceVariable(a,n)),a&&a.startsWith("event: message\ndata: ")&&a.split("\n\n").filter((function(e){return e})).forEach((function(e){try{processResponseDataEvent(JSON.parse(e.replace("event: message\ndata: ","")))}catch(e){console.error("Error processing response data:",e)}})),r&&o&&(a&&a.startsWith("event: message\ndata: ")?s&&0!==i||pushToDataLayer():(dataTagParseResponse(a).status=e.status,pushToDataLayer()))}))})).catch((function(e){console.error(e)}))}function sendPostRequestXHR(e,a,t,n,r,o,s,i,d){var c=new XMLHttpRequest;c.open("POST",e+a),c.setRequestHeader("Content-type","text/plain"),c.withCredentials=!0,c.onprogress=function(e){if(200===c.status&&c.responseText.startsWith("event: message\ndata: ")){response+=c.responseText.substring(loaded),loaded=e.loaded;for(var a=replaceVariable(response,n),t=a.indexOf("\n\n");-1!==t;){var r;e:{var o,s=a.substring(0,t).split("\n"),i="undefined"!=typeof Symbol&&Symbol.iterator&&s[Symbol.iterator];if(i)o=i.call(s);else{if("number"!=typeof s.length)throw Error(String(s)+" is not an iterable or ArrayLike");o={next:fallbackIterator(s)}}var d=o.next().value,u=o.next().value;if(d.startsWith("event: message")&&u.startsWith("data: "))try{r=JSON.parse(u.substring(u.indexOf(":")+1));break e}catch(e){}r=void 0}processResponseDataEvent(r),t=(a=a.substring(t+2)).indexOf("\n\n")}}},c.onload=function(){"2"!==c.status.toString()[0]&&console.error(c.status+"> "+c.statusText),r&&o&&(c.responseText.startsWith("event: message\ndata: ")?s&&0!==i||pushToDataLayer():(dataTagParseResponse(c.responseText).status=c.status,pushToDataLayer()))},c.send(t)}function dataTagSendData(e,a,t,n,r,o,s,i){n=n||!1,r=r||"data_layer_variable",o=o||!1,i=i||"Google Analytics";var d=JSON.stringify(e),c={transport_url:a},u=!1,l="undefined"!=typeof window&&window.dataLayer||"undefined"!=typeof dataLayer&&dataLayer||[];l&&l.length>0&&l.forEach((function(e){"object"==typeof e&&Object.keys(e).forEach((function(a){a===i&&(u=e[a])}))})),u?s?sendPostRequest(a,t,d,c,n,r,o,0,eventDataLayerData):sendPostRequestXHR(a,t,d,c,n,r,o,0,eventDataLayerData):console.warn("User has not consented to Google Analytics")}function dataTagGetData(e){return window.dataTagData={document:{characterSet:window.document.characterSet},innerWidth:window.innerWidth,innerHeight:window.innerHeight,screen:{width:window.screen.width,height:window.screen.height},dataModel:window.google_tag_manager[e].dataLayer.get({split:function(){return[]}})},window.dataTagData}