var ucDataLayerName="uc_data_layer_variable",ucEventData={},ucEventName="uc_data_tag_event";function ucParseJsonResponse(e){try{return JSON.parse(e)}catch(t){return{body:e}}}function ucReplaceTemplateVars(e,t){return e.replace(/\$\{([^\}]+)\}/g,(function(e,a){return t[a]||e}))}function ucSendImagePixel(e){var t=new Image(1,1);e.startsWith(("/"===gtmServerDomain.charAt(gtmServerDomain.length-1)?gtmServerDomain.slice(0,-1):gtmServerDomain)+"/_set_cookie")&&(ucPendingCookies++,t.onload=t.onerror=function(){t.onload=t.onerror=null,ucPendingCookies--,(!xhr||4===xhr.readyState)&&ucEventName&&ucDataLayerName&&waitForCookies&&0===ucPendingCookies&&ucPushEventToDataLayer()}),t.src=e}function ucSendNavigatorBeacon(e){var t;try{t=navigator.sendBeacon&&navigator.sendBeacon(e)}catch(e){}t||ucSendImagePixel(e)}function ucCreateArrayIterator(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function ucPushEventToDataLayer(){window[ucDataLayerName]=window[ucDataLayerName]||[],ucEventData.event=ucEventName,window[ucDataLayerName].push(ucEventData)}function ucHandleResponseEvent(e){if(e){var t,a=e.send_pixel||[];if(Array.isArray(a))for(t=0;t<a.length;t++)ucSendImagePixel(a[t]);var n=e.send_beacon||[];if(Array.isArray(n))for(t=0;t<n.length;t++)ucSendNavigatorBeacon(n[t]);if("object"==typeof e.response){var r=e.response.status_code||0,o=ucParseJsonResponse(e.response.body||{});for(var s in o)o.hasOwnProperty(s)&&(ucEventData[s]=o[s]);ucEventData.status=r}}}function ucSendFetchRequest(e,t,a,n,r,o,s,c,i){fetch(e+t,{method:"POST",headers:{"Content-Type":"text/plain"},credentials:"include",keepalive:!0,body:a}).then((function(e){e.text().then((function(t){t&&(t=ucReplaceTemplateVars(t,n)),t&&t.startsWith("event: message\ndata: ")&&t.split("\n\n").filter((function(e){return e})).forEach((function(e){try{ucHandleResponseEvent(JSON.parse(e.replace("event: message\ndata: ","")))}catch(e){console.error("Error processing response data:",e)}})),r&&o&&(t&&t.startsWith("event: message\ndata: ")?s&&0!==c||ucPushEventToDataLayer():(ucParseJsonResponse(t).status=e.status,ucPushEventToDataLayer()))}))})).catch((function(e){console.error(e)}))}function ucSendXhrRequest(e,t,a,n,r,o,s,c,i){var u=new XMLHttpRequest;u.open("POST",e+t),u.setRequestHeader("Content-type","text/plain"),u.withCredentials=!0;var d="",l=0;u.onprogress=function(e){if(200===u.status&&u.responseText.startsWith("event: message\ndata: ")){d+=u.responseText.substring(l),l=e.loaded;for(var t=ucReplaceTemplateVars(d,n),a=t.indexOf("\n\n");-1!==a;){var r;e:{var o,s=t.substring(0,a).split("\n"),c="undefined"!=typeof Symbol&&Symbol.iterator&&s[Symbol.iterator];if(c)o=c.call(s);else{if("number"!=typeof s.length)throw Error(String(s)+" is not an iterable or ArrayLike");o={next:ucCreateArrayIterator(s)}}var i=o.next().value,v=o.next().value;if(i.startsWith("event: message")&&v.startsWith("data: "))try{r=JSON.parse(v.substring(v.indexOf(":")+1));break e}catch(e){}r=void 0}ucHandleResponseEvent(r),a=(t=t.substring(a+2)).indexOf("\n\n")}}},u.onload=function(){"2"!==u.status.toString()[0]&&console.error(u.status+"> "+u.statusText),r&&o&&(u.responseText.startsWith("event: message\ndata: ")?s&&0!==c||ucPushEventToDataLayer():(ucParseJsonResponse(u.responseText).status=u.status,ucPushEventToDataLayer()))},u.send(a)}function ucTransmitData(e,t,a,n,r,o,s,c){n=n||!1,r=r||"data_layer_variable",o=o||!1,c=c||"Google Analytics";var i=JSON.stringify(e),u={transport_url:t},d=!1,l="undefined"!=typeof window&&window.dataLayer||"undefined"!=typeof dataLayer&&dataLayer||[];l&&l.length>0&&l.forEach((function(e){"object"==typeof e&&Object.keys(e).forEach((function(t){t===c&&(d=e[t])}))})),d?s?ucSendFetchRequest(t,a,i,u,n,r,o,0,ucEventData):ucSendXhrRequest(t,a,i,u,n,r,o,0,ucEventData):console.warn("User has not consented to Google Analytics")}function ucCollectPageData(e){return window.ucPageData={document:{characterSet:window.document.characterSet},innerWidth:window.innerWidth,innerHeight:window.innerHeight,screen:{width:window.screen.width,height:window.screen.height},dataModel:window.google_tag_manager[e].dataLayer.get({split:function(){return[]}})},window.ucPageData}